# scripts/smoke-test/.env.smoke.example
# Copy to .env.smoke (gitignored) and fill in values before running npm run smoke-test
#
# Usage:
#   cp scripts/smoke-test/.env.smoke.example scripts/smoke-test/.env.smoke
#   # edit .env.smoke with real values
#   source scripts/smoke-test/.env.smoke && npm run smoke-test

# ─── Required ─────────────────────────────────────────────────────────────────

# Base URL of the deployed API Gateway stage (no trailing slash)
# Find in AWS Console → API Gateway → Stages → dev → Invoke URL
# Or: aws apigateway get-stages --rest-api-id <id> --query 'item[?stageName==`dev`].invokeUrl'
SMOKE_TEST_API_URL=https://<api-gateway-id>.execute-api.us-east-1.amazonaws.com/dev

# ─── JWT Tokens ───────────────────────────────────────────────────────────────

# Clerk JWT for a regular user in the dev environment
# Obtain: Sign into the deployed dev frontend → DevTools → Network tab → copy Authorization header value
# These expire in ~1 hour; regenerate as needed
SMOKE_TEST_CLERK_JWT=eyJ...

# Optional: Clerk JWT for an admin user (used for admin-only endpoints if tested)
# SMOKE_TEST_ADMIN_JWT=eyJ...

# Optional: A real Clerk-signed JWT that has NATURALLY EXPIRED (for AC4)
# MUST be signed by the real Clerk issuer — a fake-secret token produces UNAUTHORIZED
# (invalid signature), not EXPIRED_TOKEN. See story Dev Notes for how to obtain.
# If not set, AC4 is automatically skipped with a note (not a failure).
# SMOKE_TEST_EXPIRED_JWT=eyJ...

# ─── Rate Limiting ────────────────────────────────────────────────────────────

# Optional: Clerk JWT for a DEDICATED rate-limit test user (AC14)
# Use a SEPARATE Clerk user from SMOKE_TEST_CLERK_JWT so prior traffic from other
# scenarios doesn't pre-exhaust the token bucket for this user.
# If not set, AC14 is automatically skipped with a warning.
# SMOKE_TEST_RATE_LIMIT_JWT=eyJ...

# ─── Skip List ────────────────────────────────────────────────────────────────

# Optional: Comma-separated AC IDs to skip (AC20)
# Use when certain scenarios are flaky in a shared dev environment
# Example: skip rate limiting when bucket state cannot be guaranteed fresh
# SMOKE_TEST_SKIP=AC14
